!function(a){var b="MomentPicker";a.fn[b]=function(){var c=a(this).data(b);return c?c:this.each(function(){var c,d=moment().startOf("day"),e=d.clone(),f=a(this),g=0;f.html(['<div class="header">','<a class="prev"></a>','<a class="current"></a>','<a class="next"></a>',"</div>",'<div class="body"></div>'].join(""));var h=f.children("div.header"),i=f.children("div.body"),j=h.children("a.next"),k=h.children("a.prev"),l=h.children("a.current"),m=function(){if(arguments.length>0){var a=moment(arguments[0]);return moment.isMoment(a)&&(e=a.startOf("day")),c}return e.clone()},n=function(){var a=d.year(),b=a+12,c="";for(l.text(a+" - "+(b-1));b>a;){var f=a!==e.year()?"":' class="current"';c+='<a data-year="'+a+'"'+f+">"+a+"</a>",a++}i.html(c)},o=function(){var a=d.clone().startOf("y"),b=a.clone().add("M",12),c="";for(l.text(a.year());b>a;){var f=a.format("M-YYYY")!==e.format("M-YYYY")?"":' class="current"';c+='<a data-month="'+a.format("M-YYYY")+'"'+f+">"+a.format("MMM")+"</a>",a.add("M",1)}i.html(c)},p=function(){var a=d.clone().startOf("w"),b=a.clone().add("w",1),c='<div class="week">';for(l.text(d.format("MMMM YYYY"));b>a;)c+="<span>"+a.format("ddd")+"</span>",a.add("d",1);for(c+="</div>",a=d.clone().startOf("M").startOf("w"),b=a.clone().add("d",42),c+='<div class="month">';b>a;){var f=a.format("D-M-YYYY")!==e.format("D-M-YYYY")?"":' class="current"';c+='<a data-day="'+a.format("D-M-YYYY")+'"'+f+">"+a.date()+"</a>",a.add("d",1)}c+="</div>",i.html(c)},q=[{years:12},{years:1},{months:1}],r=[n,o,p],s=function(){r[g]()};j.click(function(){d.add(q[g]),s()}),k.click(function(){d.subtract(q[g]),s()}),l.click(function(){g=Math.max(0,--g),s()}),i.on("click","[data-year]",function(){e.year(a(this).data("year")),d=e.clone(),g=1,s()}),i.on("click","[data-month]",function(){var b=moment(a(this).data("month"),"M-YYYY");e.month(b.month()).year(b.year()),d=e.clone(),g=2,s()}),i.on("click","[data-day]",function(){e=moment(a(this).data("day"),"D-M-YYYY"),d=e.clone(),s()}),c={val:m},f.data(b,c),s()})}}(jQuery);
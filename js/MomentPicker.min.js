!function(a){var b="MomentPicker";a.fn[b]=function(c){var d=a(this).data(b);if(d)return d;var e={date:moment().startOf("day")};return this.each(function(){var d,f=a.extend({},e,c),g=f.date,h=g.clone(),i=a(this),j=0;i.html(['<div class="header">','<a class="prev"></a>','<a class="current"></a>','<a class="next"></a>',"</div>",'<div class="body"></div>'].join(""));var k=i.children("div.header"),l=i.children("div.body"),m=k.children("a.next"),n=k.children("a.prev"),o=k.children("a.current"),p=function(){return!1},q=p,r=p,s=p,t=p,u=p,v=p,w=p,x=p;f.hasOwnProperty("min")&&!function(){if(f.min instanceof Function)w=f.min;else{var a=moment(f.min);moment.isMoment(a)&&(a.startOf("day"),w=function(){return a.clone()})}u=function(a){return a<w().year()},s=function(a){return a.clone().startOf("month")<w().startOf("month")},q=function(a){return a<w()}}(),f.hasOwnProperty("max")&&!function(){if(f.max instanceof Function)x=f.max;else{var a=moment(f.max);moment.isMoment(a)&&(a.startOf("day"),x=function(){return a.clone()})}v=function(a){return a>x().year()},t=function(a){return a.clone().endOf("month")>x().endOf("month")},r=function(a){return a>x()}}();var y=function(a){return!u(a)&&!v(a)},z=function(a){return!q(a)&&!r(a)},A=function(a){return!s(a)&&!t(a)},B=function(){if(arguments.length>0){var a=moment(arguments[0]);return moment.isMoment(a)&&(a.startOf("day"),z(a)&&(h=a)),d}return h.clone()},C=function(){var a=g.year(),b=a+12,c="";for(o.text(a+" - "+(b-1));b>a;){var d=a!==h.year()?[]:["current"],e=y(a)?"a":"span";c+="<"+e+' data-year="'+a+'" class="'+d.join(" ")+'">'+a+"</"+e+">",a++}l.html(c)},D=function(){var a=g.clone().startOf("y"),b=a.clone().add("M",12),c="";for(o.text(a.year());b>a;){var d=a.format("M-YYYY")!==h.format("M-YYYY")?[]:["current"],e=A(a)?"a":"span";c+="<"+e+' data-month="'+a.format("M-YYYY")+'" class="'+d.join(" ")+'">'+a.format("MMM")+"</"+e+">",a.add("M",1)}l.html(c)},E=function(){var a=g.clone().startOf("w"),b=a.clone().add("w",1),c='<div class="week">';for(o.text(g.format("MMMM YYYY"));b>a;)c+="<span>"+a.format("ddd")+"</span>",a.add("d",1);for(c+="</div>",a=g.clone().startOf("M").startOf("w"),b=a.clone().add("d",42),c+='<div class="month">';b>a;){var d=a.format("D-M-YYYY")!==h.format("D-M-YYYY")?[]:["current"],e=z(a)?"a":"span";c+="<"+e+' data-day="'+a.format("D-M-YYYY")+'" class="'+d.join(" ")+'">'+a.date()+"</"+e+">",a.add("d",1)}c+="</div>",l.html(c)},F=[{years:12},{years:1},{months:1}],G=[C,D,E],H=function(){G[j]()};m.click(function(){g.add(F[j]),H()}),n.click(function(){g.subtract(F[j]),H()}),o.click(function(){j=Math.max(0,--j),H()}),l.on("click","a[data-year]",function(){g.year(a(this).data("year")),j=1,H()}),l.on("click","a[data-month]",function(){var b=moment(a(this).data("month"),"M-YYYY");g.month(b.month()).year(b.year()),j=2,H()}),l.on("click","a[data-day]",function(){h=moment(a(this).data("day"),"D-M-YYYY"),g=h.clone(),H()}),d={val:B},i.data(b,d),H()})}}(jQuery);